<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Hello World</title>
    <style>
        canvas {
            width: 100%;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.6.2/pixi.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
</head>


<body>
    <div style="width: 100%" id="main">

    </div>
    <script>

        function textures() {
            var textures = [];
            var sprites = [
                'sprite_01',
                'sprite_05',
                'sprite_03',
                'sprite_14',
                'sprite_09',
                'sprite_10',
                'sprite_17'
            ];
            for (var i in sprites) {
                textures.push(PIXI.Texture.fromImage('resources/' + sprites[i] + '.png'));
            }
            return textures;
        }

        function sprites(n) {
            var sprites = [];
            for (var i = 0; i < n; i++) {
                var texture = textures[Math.floor(Math.random() * textures.length)];
                var bunny = new PIXI.Sprite(texture);
                bunny.x = Math.floor(Math.random() * app.renderer.width) + 1;
                bunny.y = Math.floor(Math.random() * app.renderer.height / 3 + app.renderer.height / 2);
                bg.anchor.set(0);
                sprites.push(bunny);
            }
            return sprites;
        }

        function background() {
            var bg = PIXI.Sprite.fromImage('resources/bg10.png') // ??
            return bg;
        }


        var app = new PIXI.Application(320, 200, { backgroundColor: 0x1099bb });
        document.getElementById('main').appendChild(app.view);

        var textures = textures();
        var bg = background();
        var sprites = sprites(25);
        sprites = _.sortBy(sprites, 'y');

        // Draw
        app.stage.addChild(bg);
        console.log(sprites.length);
        for (var i = 0; i < sprites.length; i++) {
            app.stage.addChild(sprites[i]);
        }



    </script>
</body>

</html>